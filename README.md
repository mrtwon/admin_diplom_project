<h2>Дипломный проект MediaWiki</h2>
<p>
Задача сделать установку MediaWiki и поднятие его инфраструктуры с запасной репликой СУБД PostgreSQL и с сохранением backup'a
<ul>
<li>
Я решил сделать автоматизацию поднятия виртуальных машин и настройку приложений на серверах использую Terraform и Ansible, за счет этого удалось скоратить в разы время на поднятия инфтраструктуры и улучшить ее понимание.
</li>
<li>
Автоматизировал установку Terraform с привязкой к Yandex Cloyd через bash скрипт позволило убрать ручной труд и ускорить поднятия виртуальных машин
</li>
<li>
Для автоматического переключения на реплику СУБД PostgreSQL в случае сбоя я написал отдельный playbook за счет этого удалось скоратить время на восстоновление в случае сбоя.
</li>
<li>
Сделал автоматический бэкап с помощью скрипта в cron — это принесло пользу в виде исключения ручного труда.
Дополнительно сделал очистку старых бэкап‑архивов с помощью отдельного скрипта — это принесло пользу в виде автоматизации поддержания порядка без необходимости постоянного контроля.
</li>
</ul>
</p>
<h3>Структура</h3>
<ul>
  <li>
    ansible
    <ul>
      <li>playbook_set.sh - поэтапный запуск каждого playbook'a Ansible</li>
      <li>playbook_up_replica_to_master.yaml - playbook аварийной смены главного БД сервера на реплику и изменния конфига в MediaWiki</li>
    </ul>
  </li>
  <li>
    terraform
    <ul>
      <li>
        install_terraform_yc.sh - sh скрипт для автоматической установки и настройки Terrraform в связке с Yandex Cloud
      </li>
    </ul>
  </li>
</ul>
<h3>Поэтапный запуск</h3>
<ul>
  <li>
    Для начала нужно поднять виртуальные машины для этого запустите terraform/install_terraform_yc.sh
    <ul>
      <li>chmod 777 terraform/install_terraform_yc.sh</li>
      <li>./terraform/install_terraform_yc.sh</li>
    </ul>
  </li>
  <li>
    После поднятия машин откройте файл ansible/inventory.yaml и внести локальные и публичные IP адреса машин
    <ul>
      <li>nano ansible/inventory.yaml</li>
    </ul>
  </li>
  <li>
    После конфигурации inventory.yaml откройте файл ansible/playbook_set.sh и последовательно запсукайте скрипт.
    На этапе установки MediaWiki прежде чем двигатся дальше настройте его через web интерфейс
    После успешной установки у вас будет возможность скачать и переместить файл LocalSettings.php в /var/www/html, это можно пропустить(уже автоматизировано), можно дальше продолжить выполнять команды в скрипте playbook_set.sh
  </li>
  <li>Конец настройки. Попробуйте для проверки открыть в браузере сревера nginx а так же nginx balancer, порт по умоолчанию 80</li>
</ul>
